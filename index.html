<!DOCTYPE html>
<html ng-app="app">

<head>
    <meta charset="utf-8">
    <title>DK CT</title>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="css/font-awesome.css" />
    <link rel="stylesheet" href="css/tether.min.css" />
		<link rel="stylesheet" href="css/animate.css">

    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/tether.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
		<script type="text/javascript" src="js/angular-local-storage.min.js"></script>
    <script type="text/javascript" src="app.js"></script>

    </script>
</head>

<body ng-controller="controller">
    <div class="container margin-top-25">
        <div class="row justify-content-center">
            <div id="login" class="col-md-6 col-xs-8" ng-if="node == null">
                <div class="jumbotron">
                    <form class="col align-self-center">
                        <div class="form-group">
                            <label for="username"><i class="fa fa-user" aria-hidden="true"></i> Username</label>
                            <input type="text" class="form-control" ng-model="username" placeholder="Enter username">
                        </div>
                        <div class="form-group">
                            <label for="password"><i class="fa fa-lock" aria-hidden="true"></i> Password</label>
                            <input type="password" class="form-control" ng-model="password" placeholder="Enter password">
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-primary col-12" ng-click="login()">Login</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="control" class="container" ng-if="node != null">

									<div class="col-12 text-right">
										<h2>
											<span class="badge badge-default"><i class="fa fa-user-circle-o" aria-hidden="true"></i> Login as {{ username }}</span>
											<button class="btn btn-primary" ng-click="goAdmin()"><i class="fa fa-cog" aria-hidden="true"></i> Admin Control</button>
											<button class="btn btn-primary" ng-click="changePassword()"><i class="fa fa-lock" aria-hidden="true"></i> Change Password</button>
											| <button class="btn btn-default" ng-click="logout()"><i class="fa fa-sign-out" aria-hidden="true"></i> Sign out</button>
										</h2>

									</div>
                <div class="jumbotron">
                    <div class="card" ng-repeat="a in node">
                        <div class="card-header">
                          	Name : <input type="text" ng-model="a.name" ng-change="update()" /> |
														IP :<input type="text" ng-model="a.ip" ng-change="update()" />
                        </div>
                        <div class="card-block">
													<h3>Activate PIN</h3>
													<ul class="list-group">
													  <li class="list-group-item" ng-repeat="pin in pin[a.id]" ng-if="pin.switch == 1">
															<div class="col-6">
																Pin {{pin.pin_id}} <br />
																Status : {{ status(pin.status) }} <br />
															</div>
															<div class="col-6">
																<button class="btn" ng-class="pin.status == 1 ? 'btn-primary':'btn-default'" ng-click="pin.status = 1;setPin(pin,a);update();"><i class="fa fa-check-circle" aria-hidden="true"></i> ON</button>
																<button class="btn" ng-class="pin.status == 0 ? 'btn-primary':'btn-default'" ng-click="pin.status = 0;setPin(pin,a);update();"><i class="fa fa-times-circle" aria-hidden="true"></i> OFF</button>
																|
																<button class="btn btn-danger" ng-click="pin.switch = 0;pin.status = 0;update();"><i class="fa fa-power-off" aria-hidden="true"></i> Deactivate</button>
															</div>
														</li>
													</ul>
													<br />
													<h3>Deactivate PIN</h3>
													<ul class="list-group">
														<li class="list-group-item" ng-repeat="pin in pin[a.id]" ng-if="pin.switch == 0">
															<div class="col-6">Pin {{pin.pin_id}} </div>
															<div class="col-6"><button class="btn btn-success" ng-click="pin.switch = 1;update();"><i class="fa fa-power-off" aria-hidden="true"></i> Active</button></div>
														</li>
													</ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</body>

</html>
